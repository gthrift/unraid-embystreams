# EmbyStreams - UnRAID Plugin Generator Configuration
# See: https://github.com/bobbintb/UnRAID-Plugin-Generator

[ENTITIES]
name = "embystreams"
author = "YourUsername"
repo = "Unraid-embystreams"
tag = "main"
plugdir = "/usr/local/emhttp/plugins/&name;"
cfgdir = "/boot/config/plugins/&name;"
launch = "Settings/EmbyStreams"
pluginURL = "https://raw.githubusercontent.com/&author;/&repo;/&tag;/&name;.plg"
srcURL = "https://raw.githubusercontent.com/&author;/&repo;/&tag;/src/embystreams"
icon = "embystreams"
min = "6.12.0"
# version is auto-generated if omitted (yyyy.mm.dd.hhmm format)

[CHANGES]
File = "./README.md"

# --- FILES ---

# 1. Plugin Icon (PNG file)
[[FILE]]
Attr = { Name = "&plugdir;/images/&name;.png" }
URL = "https://raw.githubusercontent.com/&author;/&repo;/&tag;/metadata/images/&name;.png"

# 2. Pre-Install Script
[[FILE]]
Attr = { Run = "/bin/bash", Method = "install" }
INLINE = "./.plugin/pre-install.sh"

# 3. Settings Page
[[FILE]]
Attr = { Name = "&plugdir;/&name;.page" }
URL = "&srcURL;/embystreams.page"

# 4. Dashboard Widget Page
[[FILE]]
Attr = { Name = "&plugdir;/NewDashboard.page" }
URL = "&srcURL;/NewDashboard.page"

# 5. PHP API Helper
[[FILE]]
Attr = { Name = "&plugdir;/include/EmbyAPI.php" }
URL = "&srcURL;/include/EmbyAPI.php"

# 6. PHP Helper Functions
[[FILE]]
Attr = { Name = "&plugdir;/include/helpers.php" }
URL = "&srcURL;/include/helpers.php"

# 7. AJAX Endpoint
[[FILE]]
Attr = { Name = "&plugdir;/include/ajax.php" }
URL = "&srcURL;/include/ajax.php"

# 8. Default Configuration
[[FILE]]
Attr = { Name = "&plugdir;/default.cfg" }
URL = "&srcURL;/default.cfg"

# 9. Post-Install Script
[[FILE]]
Attr = { Run = "/bin/bash", Method = "install" }
INLINE = "./.plugin/post-install.sh"

# 10. Upgrade Script
[[FILE]]
Attr = { Run = "/bin/bash", Method = "install" }
INLINE = "./.plugin/upgrade.sh"

# 11. Removal Script
[[FILE]]
Attr = { Run = "/bin/bash", Method = "remove" }
CDATA = "./.plugin/remove.sh"
